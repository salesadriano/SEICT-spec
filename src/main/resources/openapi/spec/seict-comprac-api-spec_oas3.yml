openapi: 3.0.3
info:
  title: SEICT - COMPRAC
  description: |
    API Backend para applicação SEICT - COMPRAC
  termsOfService: https://www.lampp-it.com.br/
  contact:
    email: contato@lampp-it.com.br
  license:
    name: Lampp-it - Licensa Comercial
    url: https://www.lampp-it.com.br/
  version: 1.0.0
externalDocs:
  description: SEICT - COMPRAC - Documentação
  url: https://comprac.ac.gov.br/
servers:
  - url: "{protocol}://{devServerHost}:{devServerPort}/api/seict-comprac/v1"
    description: development instance
    variables:
      protocol:
        description: a
        default: https
        enum:
          - https
          - http
      devServerHost:
        description: host name of the development server
        default: localhost
        enum:
          - localhost
          # add other hosts here
      devServerPort:
        description: host port of the api service is running
        default: "4070"
        enum:
          - "4710"
          - "8080"
          # add other ports here
tags:
  - name: Security - User
    description: Management of Users.
  - name: Security - Permissions
    description: Management of Permissions.
  - name: Security - Groups
    description: Management of Groups.
  - name: Back Office - Edital
    description: Management of Editals
paths:
  /security/user/query:
    post:
      tags:
        - Security - User
      summary: todo
      description: todo
      operationId: queryUser
      requestBody:
        description: todo
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/QueryRequest"
            examples:
              queryByName:
                $ref: "#/components/examples/UserQueryRequestByName"
              queryByEmail:
                $ref: "#/components/examples/UserQueryRequestByEmail"
      responses:
        "200":
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UserQueryResponse"
              examples:
                zeroResults:
                  $ref: "#/components/examples/UserQueryResponseWithoutResults"
                withResults:
                  $ref: "#/components/examples/UserQueryResponseWithResults"
        "400":
          $ref: "#/components/responses/400BadRequest"
        "401":
          $ref: "#/components/responses/401Unauthorized"
        "403":
          $ref: "#/components/responses/403Forbidden"
        "409":
          $ref: "#/components/responses/409Conflict"
        "500":
          $ref: "#/components/responses/500InternalServerError"
        default:
          $ref: "#/components/responses/GeneralError"
  /security/user:
    post:
      tags:
        - Security - User
      summary: todo
      description: todo
      operationId: createUser
      requestBody:
        description: todo
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UserRequest"
      responses:
        "200":
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UserResponse"
        "400":
          $ref: "#/components/responses/400BadRequest"
        "401":
          $ref: "#/components/responses/401Unauthorized"
        "403":
          $ref: "#/components/responses/403Forbidden"
        "409":
          $ref: "#/components/responses/409Conflict"
        "500":
          $ref: "#/components/responses/500InternalServerError"
        default:
          $ref: "#/components/responses/GeneralError"
  /security/user/{id}:
    put:
      tags:
        - Security - User
      summary: todo
      description: todo
      operationId: updateUser
      parameters:
        - $ref: "#/components/parameters/UserIdParam"
      responses:
        "200":
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UserResponse"
        "400":
          $ref: "#/components/responses/400BadRequest"
        "401":
          $ref: "#/components/responses/401Unauthorized"
        "403":
          $ref: "#/components/responses/403Forbidden"
        "409":
          $ref: "#/components/responses/409Conflict"
        "500":
          $ref: "#/components/responses/500InternalServerError"
        default:
          $ref: "#/components/responses/GeneralError"
    delete:
      tags:
        - Security - User
      summary: todo
      description: todo
      operationId: deleteUser
      parameters:
        - $ref: "#/components/parameters/UserIdParam"
      responses:
        "200":
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UserResponse"
        "400":
          $ref: "#/components/responses/400BadRequest"
        "401":
          $ref: "#/components/responses/401Unauthorized"
        "403":
          $ref: "#/components/responses/403Forbidden"
        "409":
          $ref: "#/components/responses/409Conflict"
        "500":
          $ref: "#/components/responses/500InternalServerError"
        default:
          $ref: "#/components/responses/GeneralError"
  /backoffice/edital/query:
    post:
      tags:
        - "Back Office - Edital"
      summary: todo
      description: todo
      operationId: queryEdital
      requestBody:
        description: todo
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/QueryRequest"
            examples:
              queryByNumber:
                $ref: "#/components/examples/EditalQueryRequestByNumber"
      responses:
        "200":
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/EditalQueryResponse"
        "400":
          $ref: "#/components/responses/400BadRequest"
        "401":
          $ref: "#/components/responses/401Unauthorized"
        "403":
          $ref: "#/components/responses/403Forbidden"
        "409":
          $ref: "#/components/responses/409Conflict"
        "500":
          $ref: "#/components/responses/500InternalServerError"
        default:
          $ref: "#/components/responses/GeneralError"
  /backoffice/edital:
    post:
      tags:
        - "Back Office - Edital"
      summary: todo
      description: todo
      operationId: createEdital
      requestBody:
        description: todo
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/EditalRequest"
            # examples:
            #   queryByNumber:
            #     $ref: "#/components/examples/EditalRequestByNumber"
      responses:
        "200":
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/EditalResponse"
        "400":
          $ref: "#/components/responses/400BadRequest"
        "401":
          $ref: "#/components/responses/401Unauthorized"
        "403":
          $ref: "#/components/responses/403Forbidden"
        "409":
          $ref: "#/components/responses/409Conflict"
        "500":
          $ref: "#/components/responses/500InternalServerError"
        default:
          $ref: "#/components/responses/GeneralError"
  /backoffice/edital/{id}:
    put:
      tags:
        - "Back Office - Edital"
      summary: todo
      description: todo
      operationId: updateEdital
      parameters:
        - $ref: "#/components/parameters/EditalIdParam"
      requestBody:
        description: todo
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/EditalRequest"
            # examples:
            #   queryByNumber:
            #     $ref: "#/components/examples/EditalRequestByNumber"
      responses:
        "200":
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/EditalResponse"
        "400":
          $ref: "#/components/responses/400BadRequest"
        "401":
          $ref: "#/components/responses/401Unauthorized"
        "403":
          $ref: "#/components/responses/403Forbidden"
        "409":
          $ref: "#/components/responses/409Conflict"
        "500":
          $ref: "#/components/responses/500InternalServerError"
        default:
          $ref: "#/components/responses/GeneralError"
    delete:
      tags:
        - "Back Office - Edital"
      summary: todo
      description: todo
      operationId: deleteEdital
      parameters:
        - $ref: "#/components/parameters/EditalIdParam"
      responses:
        "204":
          description: Successful operation. No content.
        "400":
          $ref: "#/components/responses/400BadRequest"
        "401":
          $ref: "#/components/responses/401Unauthorized"
        "403":
          $ref: "#/components/responses/403Forbidden"
        "409":
          $ref: "#/components/responses/409Conflict"
        "500":
          $ref: "#/components/responses/500InternalServerError"
        default:
          $ref: "#/components/responses/GeneralError"
components:
  schemas:
    ##
    # Problems
    ##
    Problem:
      type: object
      properties:
        type:
          type: string
          format: uri
          description: |
            An absolute URI that identifies the problem type.  When dereferenced,
            it SHOULD provide human-readable documentation for the problem type
            (e.g., using HTML).
          default: "about:blank"
          example: "https://lampp-it/problem/constraint-violation"
        title:
          type: string
          description: |
            A short, summary of the problem type. Written in english and readable
            for engineers (usually not suited for non technical stakeholders and
            not localized); example: Service Unavailable
        status:
          type: integer
          format: int32
          description: |
            The HTTP status code generated by the origin server for this occurrence
            of the problem.
          minimum: 100
          maximum: 600
          exclusiveMaximum: true
          example: 503
        detail:
          type: string
          description: |
            A human readable explanation specific to this occurrence of the
            problem.
          example: Connection to database timed out
        instance:
          type: string
          format: uri
          description: |
            An absolute URI that identifies the specific occurrence of the problem.
            It may or may not yield further information if dereferenced.
    ##
    # Query Request
    ##
    QueryRequest:
      description: todo
      type: object
      properties:
        filter:
          type: array
          items:
            $ref: "#/components/schemas/QueryRequestFilterItem"
          minItems: 0
          maxItems: 2147483647
        pagination:
          $ref: "#/components/schemas/QueryRequestPagination"
        sort:
          $ref: "#/components/schemas/QueryRequestSort"
    QueryRequestFilterItem:
      description: todo
      properties:
        key:
          type: string
          nullable: false
          minLength: 1
          maxLength: 128
        value:
          type: string
          nullable: false
          minLength: 1
          maxLength: 128
        operator:
          type: string
          enum: [EQ, GT, GTE, LT, LTE, IN, NOT_IN, IN_LIKE, NOT_IN_LIKE]
          default: "EQ"
      required:
        - key
        - value
    QueryRequestPagination:
      description: todo
      properties:
        pageNumber:
          type: integer
          format: int32
          minimum: 0
          maximum: 2147483647
          default: 0
        pageSize:
          type: integer
          format: int32
          minimum: 1
          maximum: 2147483647
          default: 10
      required:
        - pageNumber
        - pageSize
    QueryRequestSort:
      description: todo
      type: array
      items:
        $ref: "#/components/schemas/QueryRequestSortItem"
      minItems: 0
      maxItems: 2147483647
    QueryRequestSortItem:
      description: todo
      properties:
        key:
          type: string
          nullable: false
          minLength: 1
          maxLength: 128
        value:
          type: string
          enum: [ASC, DESC]
          nullable: false
          default: "ASC"
      required:
        - key
        - value
    ##
    # Query Response
    ##
    QueryResponse:
      description: todo
      type: object
      x-parent: abstract
      properties:
        results:
          type: array
          items:
            type: object
          minItems: 0
          maxItems: 2147483647
        pagination:
          $ref: "#/components/schemas/QueryResponsePagination"
    QueryResponsePagination:
      description: todo
      allOf:
        - $ref: "#/components/schemas/QueryRequestPagination"
        - type: object
          properties:
            totalCount:
              type: integer
              format: int64
              minimum: 0
              maximum: 9223372036854775807
              nullable: false
            resultSize:
              type: integer
              format: int64
              minimum: 0
              maximum: 9223372036854775807
              nullable: false
          required:
            - totalCount
            - resultSize
    ##
    # User
    ##
    UserQueryResponse:
      description: todo
      allOf:
        - $ref: "#/components/schemas/QueryResponse"
        - type: object
          properties:
            results:
              type: array
              items:
                $ref: "#/components/schemas/UserQueryResult"
              minItems: 0
              maxItems: 2147483647
          required:
            - results
            - pagination
    UserQueryResult:
      description: todo
      type: object
      properties:
        id:
          type: integer
          format: int64
          nullable: false
          minimum: 1
          maximum: 9223372036854775807
    UserRequest:
      description: todo
      type: object
      properties:
        id:
          $ref: "#/components/schemas/UserId"
        name:
          type: string
          format: uuid
          nullable: false
          minLength: 2
          maxLength: 128
        email:
          type: string
          format: email
          nullable: false
          minLength: 5
          maxLength: 128
      required:
        - name
        - email
    UserId:
      description: todo
      type: string
      format: uuid
      nullable: true
    UserResponse:
      description: todo
      type: object
      properties:
        id:
          $ref: "#/components/schemas/UserId"
        name:
          type: string
          format: uuid
          nullable: false
          minLength: 2
          maxLength: 128
        email:
          type: string
          format: email
          nullable: false
          minLength: 5
          maxLength: 128
      required:
        - id
        - name
        - email
    ##
    # Edital
    ##
    EditalQueryResponse:
      description: todo
      allOf:
        - $ref: "#/components/schemas/QueryResponse"
        - type: object
          properties:
            results:
              type: array
              items:
                $ref: "#/components/schemas/EditalQueryResult"
              minItems: 0
              maxItems: 2147483647
          required:
            - results
            - pagination
    EditalQueryResult:
      description: todo
      type: object
      properties:
        id:
          type: integer
          format: int64
          nullable: false
          minimum: 1
          maximum: 9223372036854775807
    EditalRequest:
      description: todo
      type: object
      properties:
        category:
          $ref: "#/components/schemas/EditalCategory"
        editalNumber:
          type: string
          nullable: false
          minLength: 6
          pattern: "^[0-9]{1,}/[0-9]{4}$"
        publishDate:
          type: string
          format: date
          nullable: false
          minLength: 10
          maxLength: 10
          pattern: '^([0-2][0-9]|(3)[0-1])(\/)(((0)[0-9])|((1)[0-2]))(\/)\d{4}$'
        officialJournalNumber:
          type: integer
          format: int64
          nullable: true
          minimum: 1
        officialJournalDate:
          type: string
          format: date
          nullable: true
          minLength: 10
          maxLength: 10
          pattern: '^([0-2][0-9]|(3)[0-1])(\/)(((0)[0-9])|((1)[0-2]))(\/)\d{4}$'
        validityStartDate:
          type: string
          format: date
          nullable: false
          minLength: 10
          maxLength: 10
          pattern: '^([0-2][0-9]|(3)[0-1])(\/)(((0)[0-9])|((1)[0-2]))(\/)\d{4}$'
        validityEndDate:
          type: string
          format: date
          nullable: false
          minLength: 10
          maxLength: 10
          pattern: '^([0-2][0-9]|(3)[0-1])(\/)(((0)[0-9])|((1)[0-2]))(\/)\d{4}$'
        purpose:
          type: string
          nullable: false
          minLength: 10
          maxLength: 8000
        status:
          type: string
          enum:
            - ATIVO
            - SUSPENSO
            - ENCERRADO
            - PRORROGADO
        items:
          type: array
          items:
            $ref: "#/components/schemas/EditalItem"
          nullable: false
          minItems: 1
          maxItems: 2147483647
        distributionCriterias:
          type: array
          items:
            $ref: "#/components/schemas/EditalDistributionCriteria"
          nullable: false
          minItems: 1
          maxItems: 2147483647
        accreditationCriterias:
          type: array
          items:
            $ref: "#/components/schemas/EditalAccreditationCriteria"
          nullable: false
          minItems: 1
          maxItems: 2147483647
      required:
        - category
        - editalNumber
        - publishDate
        - officialJournalNumber
        - officialJournalDate
        - validityStartDate
        - validityEndDate
        - purpose
        - status
        - items
        - distributionCriterias
        - accreditationCriterias
    EditalResponse:
      description: todo
      allOf:
        - $ref: "#/components/schemas/EditalRequest"
        - type: object
          properties:
            id:
              $ref: "#/components/schemas/EditalId"
    EditalId:
      description: todo
      type: integer
      format: int64
      nullable: false
    EditalCategory:
      description: todo
      type: object
      properties:
        id:
          type: integer
          format: int32
          nullable: false
          minimum: 1
        name:
          type: string
          nullable: false
          minLength: 1
          maxLength: 128
      required:
        - name
    EditalItem:
      description: todo
      type: object
      properties:
        id:
          type: integer
          format: int64
          nullable: true
          minimum: 1
        description:
          type: string
          nullable: false
          minLength: 10
          maxLength: 2048
        technicalSpecification:
          type: string
          nullable: false
          minLength: 10
          maxLength: 2048
        proposedValue:
          $ref: "#/components/schemas/EditalItemProposedValue"
      required:
        - description
        - technicalSpecification
    EditalDistributionCriteria:
      description: todo
      type: object
      properties:
        id:
          type: integer
          format: int64
          nullable: true
          minimum: 1
        description:
          type: string
          minLength: 10
          maxLength: 2048
          nullable: false
      required:
        - description
    EditalAccreditationCriteria:
      description: todo
      type: object
      properties:
        id:
          type: integer
          format: int64
          nullable: true
          minimum: 1
        description:
          type: string
          minLength: 10
          maxLength: 2048
          nullable: false
      required:
        - description
    EditalItemProposedValue:
      description: todo
      properties:
        id:
          type: integer
          format: int64
          nullable: true
          minimum: 1
        valueByCounty:
          type: array
          items:
            $ref: "#/components/schemas/EditalItemProposedValueByCounty"
        valueByZone:
          type: array
          items:
            $ref: "#/components/schemas/EditalItemProposedValueByZone"
        valueState:
          type: number
          format: double
          minimum: 0
    EditalItemProposedValueByCounty:
      description: todo
      properties:
        id:
          type: integer
          format: int64
          nullable: true
          minimum: 1
        countyId:
          type: integer
          format: int32
          nullable: false
          minimum: 1
        proposedValue:
          type: number
          format: double
          nullable: false
          minimum: 0
      required:
        - countyId
        - proposedValue
    EditalItemProposedValueByZone:
      description: todo
      properties:
        id:
          type: integer
          format: int64
          nullable: true
          minimum: 1
        zoneId:
          type: integer
          format: int32
          nullable: false
          minimum: 1
        proposedValue:
          type: number
          format: double
          nullable: false
          minimum: 0
      required:
        - zoneId
        - proposedValue
  parameters:
    UserIdParam:
      name: id
      description: todo
      in: path
      required: true
      schema:
        $ref: "#/components/schemas/UserId"
    EditalIdParam:
      name: id
      description: todo
      in: path
      required: true
      schema:
        $ref: "#/components/schemas/EditalId"
  responses:
    400BadRequest:
      description: Bad Request.
      content:
        application/problem+json:
          schema:
            $ref: "#/components/schemas/Problem"
    401Unauthorized:
      description: Unauthorized.
      content:
        application/problem+json:
          schema:
            $ref: "#/components/schemas/Problem"
    403Forbidden:
      description: Forbidden.
      content:
        application/problem+json:
          schema:
            $ref: "#/components/schemas/Problem"
    409Conflict:
      description: Conflict.
      content:
        application/problem+json:
          schema:
            $ref: "#/components/schemas/Problem"
    500InternalServerError:
      description: Internal Server Error.
      content:
        application/problem+json:
          schema:
            $ref: "#/components/schemas/Problem"
    GeneralError:
      description: Unexpected Error.
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/Problem"
  examples:
    UserQueryRequestByName:
      summary: Query by Name (Equal).
      description: todo
      value:
        {
          "filter": ["name:'user1,user2'"],
          "pagination": { "pageNumber": 0, "pageSize": 10 },
          "sort": ["name:asc"],
        }
    UserQueryRequestByEmail:
      summary: Query by Email (Like).
      description: todo
      value:
        {
          "filter": ["email:'email1,email2':IN_LIKE"],
          "pagination": { "pageNumber": 0, "pageSize": 10 },
          "sort": ["name:asc"],
        }
    UserQueryResponseWithoutResults:
      summary: Without Results.
      description: Example of query response without any results.
      value:
        {
          "results": [],
          "pagination":
            {
              "pageNumber": 0,
              "pageSize": 10,
              "totalCount": 0,
              "resultSize": 0,
            },
        }
    UserQueryResponseWithResults:
      summary: With Results.
      description: Example of query response without any results.
      value:
        {
          "results": [{ "id": 1, "name": "User", "email": "user@mail.com" }],
          "pagination":
            {
              "pageNumber": 0,
              "pageSize": 10,
              "totalCount": 1,
              "resultSize": 1,
            },
        }
    EditalQueryRequestByNumber:
      summary: Query By Number.
      description: Exemple of query request by number.
      value: {}
